<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hb.mapper.DormitoryPartStuMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.hb.entity.DormitoryPartStu">
        <id column="ID" property="id"/>
        <result column="STUDENT_ID" property="studentId"/>
        <result column="PART_ID" property="partId"/>
        <result column="CREATE_DATE" property="createDate"/>
        <result column="Operator_id" property="operatorId"/>
        <result column="STATE" property="state"/>
    </resultMap>
    <select id="selectPartStu" resultType="java.util.Map"
            parameterType="java.util.Map">

        SELECT
        *
        FROM
        `dormitory_part_stu` dps,
        student_info si
        WHERE si.id = dps.`STUDENT_ID`
        AND dps.`STUDENT_ID` IN
        <if test="param.studentIdList != null and param.studentIdList != ''">
            <foreach collection="list" item="studentId" index="index" open="(" close=")" separator=",">
                #{studentId}
            </foreach>
        </if>

        <if test="param.partId != null and param.partId != ''">
            and pds.PART_ID = #{param.partId,jdbcType=VARCHAR}
        </if>
        ORDER BY #{param.fenpeiRule,jdbcType=VARCHAR}

    </select>
</mapper>
